(()=>{"use strict";var t={28:(t,n,e)=>{e.d(n,{Z:()=>s});var r=e(81),o=e.n(r),a=e(645),i=e.n(a)()(o());i.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap);"]),i.push([t.id,':root {\n  --section-padding: 1rem;\n  --section-margin: 1rem;\n  --border-radius-default: 0.75rem;\n  --primary-color: #82b4ff;\n  --primary-color-dark: #46618a;\n  --shade-color: #494949da;\n  --color-shadow: grey;\n  --grid-size: 12;\n}\n\n*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: "IBM Plex Mono", monospace;\n}\n\nbutton,\ninput,\nselect,\ntextarea {\n  font-family: inherit;\n  font-size: 100%;\n}\n\nbutton {\n  background-color: var(--primary-color);\n  color: rgba(255, 255, 255, 0.5);\n  border: none;\n  /* border-radius: 32px; */\n  padding: var(--section-padding) calc(var(--section-padding) * 2);\n  text-decoration: none;\n  font-size: 1.5rem;\n  transition-duration: 0.2s;\n}\n\nbutton:not(:disabled),\ninput:not(:disabled),\ninput:not(:disabled) + label,\na {\n  cursor: pointer;\n  color: rgba(255, 255, 255, 1);\n}\n\n.icon:hover {\n  cursor: pointer;\n}\n\nbutton:not(:disabled):hover {\n  background-color: var(--primary-color-dark);\n}\n\n.box-shadow {\n  box-shadow: 2px 5px 5px var(--color-shadow);\n}\n\n.icon {\n  vertical-align: bottom;\n}\n\nbody {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\nh1 {\n  text-align: center;\n  font-size: 3rem;\n  background: var(--primary-color);\n  padding: var(--section-padding);\n}\n\nmain {\n  flex: 1;\n  margin-bottom: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-evenly;\n  padding: var(--section-padding);\n}\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(var(--grid-size), 1fr);\n  padding: var(--section-padding);\n  width: clamp(400px, 50vw, 700px);\n}\n\n.grid-cell {\n  border: solid 1px black;\n  width: 100%;\n  height: 0;\n  padding-top: 100%;\n  position: relative;\n}\n\n.grid-cell.miss,\n.grid-cell.hit {\n  cursor: not-allowed;\n}\n\n#player2-container .grid {\n  cursor: crosshair;\n}\n\n#player2-container .grid-cell:hover {\n  border: solid 1px white;\n}\n\n#setup-controls {\n  display: grid;\n  gap: 0.5rem;\n}\n\n#setup-instructions {\n  border-bottom: solid 2px black;\n  text-align: center;\n}\n\n#rotate-button:hover + #shipContainer > .draggable:first-child {\n  transform: rotate(0deg);\n}\n\n#shipContainer {\n  justify-self: center;\n  width: fit-content;\n  display: flex;\n  align-items: center;\n  gap: 1.5rem;\n  padding: var(--section-padding);\n}\n\n#shipContainer > :not(:first-child) {\n  opacity: 0.5;\n  width: 50%;\n}\n\n.ship {\n  background: gray;\n}\n\n#setup-controls {\n  background: var(--primary-color);\n  padding: var(--section-padding);\n  border-radius: var(--border-radius-default);\n}\n\n.draggable.ship {\n  height: fit-content;\n  width: fit-content;\n}\n\n.ship-unit {\n  background: rgba(128, 128, 128, 0.623);\n  width: 25px;\n  height: 25px;\n  border: solid 1px black;\n}\n\n/* Currently draggable elements  */\n[draggable="true"] {\n  cursor: move;\n}\n\n[draggable="true"] .ship-unit {\n  width: 50px;\n  height: 50px;\n}\n\n.dragHover-valid {\n  background: lightgreen;\n}\n\n.dragHover-invalid {\n  background: red;\n}\n\n.vertical {\n  display: flex;\n}\n\n.hit {\n  background: rgb(255, 84, 112);\n}\n\n.miss {\n  background: rgb(211, 211, 211);\n}\n\n#player1-container,\n#player2-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.pop-up {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  padding: 2rem 1rem;\n  transform: translate(-50%, -50%);\n  width: 50%;\n  background: rgba(252, 252, 252, 0.77);\n  z-index: 99;\n  border-radius: var(--border-radius-default);\n  border: solid 2px black;\n}\n\n.pop-up button {\n  border-radius: 1.5rem;\n}\n\n.pop-up ~ * {\n  filter: blur(3px);\n}\n\nfooter {\n  text-align: center;\n  padding: var(--section-padding);\n  background: var(--primary-color-dark);\n  margin-top: var(--section-margin);\n  flex-shrink: 0;\n}\n\n@media (min-width: 780px) {\n  main {\n    flex-direction: row;\n  }\n\n  .pop-up {\n    width: 40%;\n  }\n}\n',""]);const s=i},645:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",r=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),r&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),r&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,r,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),n.push(l))}},n}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var n=[];function e(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].identifier===t){e=r;break}return e}function r(t,r){for(var a={},i=[],s=0;s<t.length;s++){var d=t[s],c=r.base?d[0]+r.base:d[0],l=a[c]||0,u="".concat(c," ").concat(l);a[c]=l+1;var p=e(u),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var f=o(h,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function o(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,o){var a=r(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var s=e(a[i]);n[s].references--}for(var d=r(t,o),c=0;c<a.length;c++){var l=e(a[c]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}a=d}}},569:t=>{var n={};t.exports=function(t,e){var r=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},216:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},565:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,o&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var a=e.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},589:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={id:r,exports:{}};return t[r](a,a.exports,e),a.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.nc=void 0,(()=>{var t=e(379),n=e.n(t),r=e(795),o=e.n(r),a=e(569),i=e.n(a),s=e(565),d=e.n(s),c=e(216),l=e.n(c),u=e(589),p=e.n(u),h=e(28),f={};f.styleTagTransform=p(),f.setAttributes=d(),f.insert=i().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=l(),n()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals;const m=function(t,n,e){return{name:t,get playerBoard(){return n},playRound:(t,n=function(t){if(e)return function(t){const n=t.board,e=t.getHits(),r=[];return e.forEach((n=>{[[n[0]+1,n[1]],[n[0],n[1]+1],[n[0]-1,n[1]],[n[0],n[1]-1]].forEach((n=>{t.validNeighbor(n)&&(r.includes(n)||r.push(n))}))})),r.length>0?r[0]:function(t){const n=[];for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++)null===t[e][r].hitStatus&&n.push([e,r]);return n[Math.floor(Math.random()*n.length)]}(n)}(t);let n=prompt("Enter an x-coordinate: "),r=prompt("Enter a y-coordinate: ");for(;null!==t.board[n][r].hitStatus;)alert("You have already chosen that space"),n=prompt("Enter an x-coordinate: "),r=prompt("Enter a y-coordinate: ");return[n,r]}(t.playerBoard))=>(t.playerBoard.receiveAttack(n),{chosenCoords:n,hitShip:t.playerBoard.board[n[0]][n[1]].containsShip})}},g=function(t=12){const n=[];for(let e=0;e<t;e++){n.push([]);for(let r=0;r<t;r++)n[e].push({hitStatus:null,containsShip:!1,shipIndex:null})}const e=[];return{get board(){return n},get ships(){return e},insertShip:r=>{r.forEach((e=>{if(e[0]>=t||e[1]>=t)throw new Error(`[${e[0]},${e[1]}] is outside of grid size ${t}`);if(n[e[0]][e[1]].containsShip)throw new Error(`[${e[0]},${e[1]}] is already occupied`)})),e.push(function(t){let n=t;return{length:t,hit:()=>{n-=1},get health(){return n},isSunk:()=>n<=0}}(r.length)),r.forEach((t=>{n[t[0]][t[1]].containsShip=!0,n[t[0]][t[1]].shipIndex=e.length-1}))},receiveAttack:t=>{if(null!==n[t[0]][t[1]].hitStatus)throw new Error(`[${t[0]},${t[1]}] has already been attacked`);n[t[0]][t[1]].containsShip?(n[t[0]][t[1]].hitStatus=!0,e[n[t[0]][t[1]].shipIndex].hit()):n[t[0]][t[1]].hitStatus=!1},allShipsSunk:()=>{let t=!0;return e.forEach((n=>{n.isSunk()||(t=!1)})),t},getRandomAttackableSpace:()=>{const t=(()=>{const t=[];for(let e=0;e<n.length;e++)for(let r=0;r<n[e].length;r++)null===n[e][r].hitStatus&&t.push([e,r]);return t})();return t[Math.floor(Math.random()*t.length)]},getPossibleShipCoords:t=>{const e=[],r=[];for(let o=0;o<n.length;o++)for(let a=0;a<n[o].length;a++){const i=[],s=[];for(let e=0;e<t;e++)o+e<n.length&&!n[o+e][a].containsShip&&i.push([o+e,a]),a+e<n.length&&!n[o][a+e].containsShip&&s.push([o,a+e]);i.length===t&&e.push(i),s.length===t&&r.push(s)}return{possibleHorizontalCoords:e,possibleVerticalCoords:r}},getHits:()=>{const t=[];for(let e=0;e<n.length;e++)for(let r=0;r<n[e].length;r++)!0===n[e][r].hitStatus&&n[e][r].containsShip&&t.push([e,r]);return t},validNeighbor:t=>t[0]>=0&&t[0]<n.length&&t[1]>=0&&t[1]<n.length&&null===n[t[0]][t[1]].hitStatus}};let v=[],b=null,y=null,x=[];function S(t=m("Player 1",function(){const t=g();return x.forEach((n=>{t.insertShip(n)})),t}(),!1),n=function(t,n=12){const e=C(void 0,n);return m("Computer",e,!0)}()){v.push(t),v.push(n),b=v[0],y=v[1]}function E(){v=[]}function C(t=[5,4,3,3,2],n=12){const e=g(n);return t.forEach((t=>{const{possibleHorizontalCoords:n,possibleVerticalCoords:r}=e.getPossibleShipCoords(t);let o=[];o=Math.random()>.5?n[Math.floor(Math.random()*n.length)]:r[Math.floor(Math.random()*r.length)],e.insertShip(o)})),e}function L(t){const n=b.playRound(y,t),e=b;return b=y,y=e,n}function w(t){return t.playerBoard.allShipsSunk()}const k=document.querySelector("main"),$=document.createElement("div"),q=document.createElement("div");function M(){T(k),x=[],E();const t=document.createElement("div");t.setAttribute("id","setup-controls"),t.classList.add("box-shadow");const n=document.createElement("p");n.setAttribute("id","setup-instructions"),n.textContent="Drag and drop your ships on the board",t.appendChild(n);let e=!0;!function(t,n=12){document.querySelector(":root").style.setProperty("--grid-size",n);const r=document.createElement("div");r.classList.add("grid");for(let t=0;t<n;t++)for(let e=0;e<n;e++){const n=document.createElement("div");n.dataset.xSetup=t,n.dataset.ySetup=e,n.classList.add("grid-cell"),n.addEventListener("dragenter",o),n.addEventListener("dragover",i),n.addEventListener("dragleave",s),n.addEventListener("drop",d),r.appendChild(n)}function o(t){t.preventDefault(),a();const n=parseInt(t.target.dataset.xSetup),e=parseInt(t.target.dataset.ySetup);let r="";if(r=c([n,e],l(),u())?"dragHover-valid":"dragHover-invalid",u())for(let t=n;t<parseInt(n)+l();t++){const n=document.querySelector(`[data-x-setup~="${t}"][data-y-setup~="${e}"]`);n.classList.add("dragHover"),n.classList.add(r)}else for(let t=e;t<parseInt(e)+l();t++){const e=document.querySelector(`[data-x-setup~="${n}"][data-y-setup~="${t}"]`);console.log(e.textContent),e.classList.add("dragHover"),e.classList.add(r)}}function i(t){t.preventDefault()}function s(t){}function d(t){a();const n=parseInt(t.target.dataset.xSetup),i=parseInt(t.target.dataset.ySetup);if(!c([n,i],l(),u()))return void console.error(`${n},${i} is invalid`);const s=[];if(u())for(let t=n;t<n+l();t++){const n=r.querySelector(`[data-x-setup~="${t}"][data-y-setup~="${i}"]`);n.classList.add("ship"),n.removeEventListener("dragenter",o),n.removeEventListener("drop",d),s.push([t,i])}else for(let t=i;t<i+l();t++){const e=r.querySelector(`[data-x-setup~="${n}"][data-y-setup~="${t}"]`);e.classList.add("ship"),e.removeEventListener("dragenter",o),e.removeEventListener("drop",d),s.push([n,t])}var p;p=s,x.push(p);const h=document.querySelector("#shipContainer");h.removeChild(h.firstChild),h.hasChildNodes()&&(h.firstChild.draggable=!0),e=!0,h.childElementCount<1&&(document.querySelector("#start-button").disabled=!1,document.querySelector("#rotate-button").disabled=!0)}function c(t,e,o){if(o&&t[0]+e>n)return!1;if(!o&&t[1]+e>n)return!1;if(o){for(let n=t[0];n<t[0]+e;n++)if(r.querySelector(`[data-x-setup~="${n}"][data-y-setup~="${t[1]}"]`).classList.contains("ship"))return!1}else for(let n=t[1];n<t[1]+e;n++)if(r.querySelector(`[data-x-setup~="${t[0]}"][data-y-setup~="${n}"]`).classList.contains("ship"))return!1;return!0}function l(){return document.querySelector("#shipContainer").firstChild.childElementCount}function u(){return e}t.append(r)}(k),function(n=[5,4,3,3,2],r=t){const o=document.createElement("button");o.setAttribute("id","rotate-button"),o.addEventListener("click",(function(){e=!e,e?document.querySelector("#shipContainer > div:nth-child(1)").classList.remove("vertical"):document.querySelector("#shipContainer > div:nth-child(1)").classList.add("vertical")})),o.textContent="Rotate Ship";const i=document.createElement("div");i.setAttribute("id","shipContainer");const s=document.createElement("button");s.textContent="Reset Board",s.addEventListener("click",(()=>{M()})),n.forEach((t=>{const n=document.createElement("div");n.classList.add("draggable"),n.dataset.isHorizontal=!0,n.addEventListener("dragstart",(function(n){n.dataTransfer.clearData(),n.dataTransfer.setData("text/plain",JSON.stringify({shipSize:t}))})),n.addEventListener("dragend",(function(t){a()}));for(let e=0;e<t;e++){const t=document.createElement("div");t.dataset.index=e,t.classList.add("ship-unit"),n.appendChild(t)}i.append(n)})),i.firstChild.draggable=!0,r.append(o,i,s)}();const r=document.createElement("button");r.textContent="Random Board",r.addEventListener("click",(function(){M();const t=C();S(m("Player 1",t,!1));const n=document.querySelector(".grid");for(let e=0;e<t.board.length;e++)for(let r=0;r<t.board[e].length;r++)t.board[e][r].containsShip&&n.querySelector(`[data-x-setup~="${e}"][data-y-setup~="${r}"]`).classList.add("ship");const e=document.querySelector("#shipContainer");T(e),e.childElementCount<1&&(document.querySelector("#start-button").disabled=!1,document.querySelector("#rotate-button").disabled=!0)}));const o=document.createElement("button");function a(){document.querySelectorAll(".dragHover").forEach((t=>t.classList.remove("dragHover","dragHover-valid","dragHover-invalid")))}o.setAttribute("id","start-button"),o.textContent="Start Game",o.disabled=!0,o.addEventListener("click",(()=>{!function(){T(k),T($),T(q),0===v.length&&(E(),S());const t=A(v[0],!0),n=A(v[1],!1),e=document.createElement("h2");e.textContent=v[0].name,e.classList.add("player-name");const r=document.createElement("h2");r.textContent=v[1].name,r.classList.add("player-name"),$.append(t,e),q.append(n,r),k.append($,q)}()})),t.append(r,o),k.appendChild(t)}function A(t,n){const e=document.createElement("div");e.classList.add("grid");const r=t.playerBoard.board,o=r.length;for(let t=0;t<o;t++)for(let a=0;a<o;a++){const o=document.createElement("div");o.classList.add("grid-cell"),n||(o.dataset.xCoord=t,o.dataset.yCoord=a,o.addEventListener("click",H)),null!==r[t][a].hitStatus&&(r[t][a].hitStatus?o.classList.add("hit"):o.classList.add("miss")),n&&r[t][a].containsShip&&o.classList.add("ship"),e.append(o)}return e}function I(t){!function(){T(q);const t=document.createElement("h2");t.textContent=v[1].name,t.classList.add("player-name"),q.append(A(v[1],!0),t)}(),document.querySelectorAll("#player2-container .grid-cell").forEach((t=>{t.removeEventListener("click",H)}));const n=document.createElement("div");n.classList.add("pop-up");const e=document.createElement("h2");e.setAttribute("id","winning-message"),e.textContent=`${t.name} wins!`;const r=document.createElement("button");r.textContent="Start New Game",r.addEventListener("click",M),n.append(e,r),k.prepend(n)}function H(t){const n=[t.target.dataset.xCoord,t.target.dataset.yCoord],e=document.createElement("h2");e.textContent=v[0].name,e.classList.add("player-name");const r=document.createElement("h2");if(r.textContent=v[1].name,r.classList.add("player-name"),null===v[1].playerBoard.board[n[0]][n[1]].hitStatus){let t=L(n);T(q),q.append(A(v[1],!1),r),w(v[1])?I(v[0]):(t=L(),console.log(t),T($),$.append(A(v[0],!0),e),w(v[0])&&I(v[1]))}}function T(t){for(;t.firstChild;)t.removeChild(t.firstChild)}$.setAttribute("id","player1-container"),q.setAttribute("id","player2-container");const z=e.p+"e7ab8675a2cbadea548c.svg",B=new Image;B.src=z,B.classList.add("icon"),B.alt="github icon",document.querySelector("body > footer > p > a").appendChild(B),M()})()})();